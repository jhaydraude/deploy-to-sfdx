<template>
  <div class="slds-m-vertical_large">
    Command: {result.scanParameters}
  </div>
    <template if:true={result.scanResult.MonitoredItems}>
      <base-card>
        <span>Inventory of Monitored Metadata</span>
        <div class="slds">
          <div class="slds-table--header-fixed_container" style="height:450px;">
            <div class="slds-scrollable_y" style="height:100%;">
              <table class="slds-table slds-table_bordered slds-table--header-fixed">
                <thead>
                  <tr class="slds-text-title_caps">
                    <th scope="col">
                      <div class="slds-truncate slds-cell-fixed" title="Metadata Type">Metadata Type</div>
                    </th>
                    <th scope="col">
                      <div class="slds-truncate slds-cell-fixed" title="Count">Count</div>
                    </th>
                  </tr>
                </thead>
                <tbody>
                  <template for:each={result.scanResult.MonitoredItems} for:item="currentItem" for:index="index">
                    <tr key={currentItem.label}>
                      <td data-label="Metadata Type">
                        <div class="slds-truncate preserve-format" title={currentItem.label}>{currentItem.label}</div>
                      </td>
                      <td data-label="Count">
                        <div class="slds-truncate" title={currentItem.count}>{currentItem.count}</div>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </base-card>
    </template>

    <template if:true={result.scanResult.Recommendations}>
      <!-- Enablement Content-->
      <base-card>
        <span>Best Practices and Feature Recommendations</span>
        <template for:each={result.scanResult.Recommendations} for:item="currentItem" for:index="index">
          <base-card key={currentItem.label}>
            <span>{currentItem.label}</span><br />
            <span>{currentItem.message}</span><br />
            <template if:true={currentItem.url}>
              <span><a href={currentItem.url} target="_blank">Link</a><br /></span>
            </template>
            <template if:true={currentItem.exceptions}>
              <template for:each={currentItem.exceptions} for:item="currentException" for:index="e">
                <span key={currentException}>
                  {currentException},
                </span>
              </template>
            </template>
          </base-card>
        </template>
      </base-card>
    </template>
    <template if:true={result.scanResult.CodeQualityNotes}>
      <!-- Quality Rules-->
      <base-card>
        <span>Quality Rules</span>
        <template for:each={result.scanResult.CodeQualityNotes} for:item="currentItem" for:index="index">
          <base-card key={currentItem.label}>
            <span>{currentItem.label}</span><br />
            <span>{currentItem.message}</span><br />
            <template if:true={currentItem.url}>
              <span><a href={currentItem.url} target="_blank">Link</a><br /></span>
            </template>
            <template if:true={currentItem.exceptions}>
              <template for:each={currentItem.exceptions} for:item="currentException" for:index="e">
                <span key={currentException}>
                  {currentException},
                </span>
              </template>
            </template>
          </base-card>
        </template>
      </base-card>
    </template>
    <template if:true={result.scanResult.Alerts}>
      <!-- Partner Alerts -->
      <base-card>
        <span>Partner Alerts</span>
        <template for:each={result.scanResult.Alerts} for:item="currentItem" for:index="index">
          <base-card key={currentItem.label}>
            <span>{currentItem.label}</span><br />
            <span>{currentItem.message}</span><br />
            <template if:true={currentItem.url}>
              <span><a href={currentItem.url} target="_blank">Link</a><br /></span>
            </template>
            <template if:true={currentItem.exceptions}>
              <template for:each={currentItem.exceptions} for:item="currentException" for:index="e">
                <span key={currentException}>
                  {currentException},
                </span>
              </template>
            </template>
          </base-card>
        </template>
      </base-card>
    </template>
    <template if:true={result.scanResult.InstallationWarnings}>
      <!-- Installation Warnings -->
      <base-card>
        <span>Installation Warnings</span>
        <template for:each={result.scanResult.InstallationWarnings} for:item="currentItem" for:index="index">
          <base-card key={currentItem.edition}>
            <span>Cannot be installed in {currentItem.edition}</span><br />
            <span>Reason: </span><br />
            <template for:each={currentItem.blockingItems} for:item="currentException" for:index="e">
                <span key={currentException.label}>
                  {currentException.label}<br>
                </span>
            </template>
            
          </base-card>
        </template>
      </base-card>
    </template>
    <template if:true={result.scanResult.Dependencies}>
      <base-card>
        <span>Dependencies</span>
        <template for:each={result.scanResult.Dependencies} for:item="currentItem" for:index="index">
          <span>{currentItem.label</span><br>
            <template if:true={currentItem.items}>
              <template for:each={currentItem.items} for:item="current" for:index="i">
                <span class="preserve-format" key={current}>    {current}</span><br />
              </template>
            </template>
        </template>
    </base-card>
    </template>
</template>
